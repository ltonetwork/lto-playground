<div class="scenario-editor-content" fxLayout="row">
  <div class="editor-panel" fxFlex="1 1 50">
    <div class="editor-header">scenario_namme</div>
    <ng-container *ngIf="schemas$ | async as schemas">
      <lto-json-editor [schemas]="schemas" [value]="scenario$ | async" #editor (changeScenario)="scenarioChanged($event)"></lto-json-editor>
    </ng-container>
  </div>
  <div class="documentation-panel" fxFlex="1 1 50">
    <ng-container *ngIf="scenario$ | async as scenario">
      <ng-container *ngIf="scenario.assets">
        <ng-container *ngTemplateOutlet="materialSection; context: { section: 'Assets', items: scenario.assets}"></ng-container>
      </ng-container>

      <ng-container *ngIf="scenario.assets">
        <ng-container *ngTemplateOutlet="materialSection; context: { section: 'Actors', items: scenario.actors}"></ng-container>
      </ng-container>

      <ng-container *ngIf="scenario.assets">
        <ng-container *ngTemplateOutlet="materialSection; context: { section: 'Definitions', items: scenario.definitions}"></ng-container>
      </ng-container>
    </ng-container>
  </div>

  <ng-template let-section="section" let-items="items" #section>
    <section>
      <h1>{{section}}</h1>
      <mat-expansion-panel *ngFor="let item of items | keyvalue; trackBy: trackByFn">
        <mat-expansion-panel-header>
          <mat-panel-title>{{item.value.title || item.key}}</mat-panel-title>
        </mat-expansion-panel-header>
        <pre>{{item.value | json}}</pre>
      </mat-expansion-panel>
    </section>
  </ng-template>

  <ng-template #materialSection let-section="section" let-items="items">
    <section class="material-section">
      <h1>{{section}}</h1>
      <p class="section-description">Section description to explain users what does it mean?</p>
      <ng-container *ngFor="let item of items | keyvalue; trackBy: trackByFn">
        <div class="content">
          <h2 fxLayout="row" fxLayoutAlign="start center" (click)="pannel.toggle()">
            <span fxFlex="1 1 auto">{{item.value.title || item.key}}</span>
            <mat-icon>keyboard_arrow_down</mat-icon>
          </h2>
          <mat-expansion-panel #pannel>
            <pre>{{item.value | json}}</pre>
          </mat-expansion-panel>
        </div>

        <mat-divider></mat-divider>
      </ng-container>
    </section>
  </ng-template>